<!DOCTYPE html>
<html lang="fr" data-fr-scheme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Maturité ComNum{% endblock %}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.11.2/dist/dsfr.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.11.2/dist/utility/utility.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr-chart@2.0.4/dist/DSFRChart/DSFRChart.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr-chart@2.0.4/dist/DSFRChart/DSFRChart.js"></script>
    <style>
        .badge-portee-C { background: #fee7fc; color: #6e445a; }
        .badge-portee-D { background: #e3e3fd; color: #000091; }
        .badge-portee-P { background: #bafaee; color: #18753c; }
        .niveau-1 { background: #ffecec; }
        .niveau-2 { background: #fff4e5; }
        .niveau-3 { background: #e3e3fd; }
        .niveau-4 { background: #b8fec9; }
        .niveau-badge-1 { background: #ce0500; color: #fff; }
        .niveau-badge-2 { background: #b34000; color: #fff; }
        .niveau-badge-3 { background: #000091; color: #fff; }
        .niveau-badge-4 { background: #18753c; color: #fff; }
        .dimension-header { background: #000091; color: #fff; padding: .75rem 1rem; border-radius: .5rem .5rem 0 0; }
        .capacite-card { border-left: 4px solid #000091; margin-bottom: 1rem; }
        .heatmap-cell { width: 2.5rem; height: 2.5rem; text-align: center; line-height: 2.5rem; font-weight: 600; font-size: .85rem; }
        .fr-progress { height: 6px; background: var(--background-contrast-grey); border-radius: 3px; overflow: hidden; }
        .fr-progress__bar { height: 100%; background: #000091; transition: width 0.3s ease; }
    </style>
    {% block extra_css %}{% endblock %}
</head>
<body>
    <header role="banner" class="fr-header">
        <div class="fr-header__body">
            <div class="fr-container">
                <div class="fr-header__body-row">
                    <div class="fr-header__brand fr-enlarge-link">
                        <div class="fr-header__brand-top">
                            <div class="fr-header__logo">
                                <p class="fr-logo">
                                    République<br>Française
                                </p>
                            </div>
                            <div class="fr-header__navbar">
                                <button class="fr-btn--menu fr-btn" data-fr-opened="false" aria-controls="modal-menu" aria-haspopup="menu" title="Menu">
                                    Menu
                                </button>
                            </div>
                        </div>
                        <div class="fr-header__service">
                            <a href="{{ url_for('index') }}" title="Accueil - Maturité ComNum">
                                <p class="fr-header__service-title">Maturité ComNum</p>
                            </a>
                            <p class="fr-header__service-tagline">Suivi de la maturité numérique de la communication</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="fr-header__menu fr-modal" id="modal-menu" aria-labelledby="modal-menu">
            <div class="fr-container">
                <button class="fr-btn--close fr-btn" aria-controls="modal-menu" title="Fermer">Fermer</button>
                <div class="fr-header__menu-links"></div>
                <nav class="fr-nav" role="navigation" aria-label="Menu principal">
                    <ul class="fr-nav__list">
                        <li class="fr-nav__item"><a class="fr-nav__link" href="{{ url_for('index') }}">Accueil</a></li>
                        <li class="fr-nav__item"><a class="fr-nav__link" href="{{ url_for('entites_list') }}">Entités</a></li>
                        <li class="fr-nav__item"><a class="fr-nav__link" href="{{ url_for('campagnes_list') }}">Campagnes</a></li>
                        <li class="fr-nav__item"><a class="fr-nav__link" href="{{ url_for('evaluations_list') }}">Évaluations</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main class="fr-container fr-my-4w">
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        {% for category, message in messages %}
        {% set dsfr_cat = {'success': 'success', 'info': 'info', 'warning': 'warning', 'danger': 'error'} %}
        <div class="fr-alert fr-alert--{{ dsfr_cat.get(category, 'info') }} fr-alert--sm fr-mb-2w">
            <p>{{ message }}</p>
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>

    <script type="module" src="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.11.2/dist/dsfr.module.min.js"></script>
    <script type="text/javascript" nomodule src="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.11.2/dist/dsfr.nomodule.min.js"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
